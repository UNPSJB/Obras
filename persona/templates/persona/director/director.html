
{% extends 'base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags%}


{% block barra %}
	<ul class="sidebar sidebar-1">
		<font size="2">
			<li><a href="#" class="current"><font color="white">Director</font></a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" onclick='mostrarSubmenu("tareasUsuario"),opcionesUsuario("nada")'>Usuarios <span class="caret"></span></a></li>
				<ul class="sidebar sidebar-2" style="display:none;" id="tareasUsuario">
					<li><a href="#" onclick='opcionesUsuario("alta_usuario")'>Crear Usuario</a></li>
					<li><a href="#" onclick='opcionesUsuario("modificar_usuario_grupo")'>Cambiar usuario de grupo</a></li>
				</ul>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" onclick='mostrarSubmenu("tareasTramite"),opcionesDatosTramite("nada")'>Datos tramite <span class="caret"></span></a></li>
				<ul class="sidebar sidebar-2" style="display:none;" id="tareasTramite">
					<li><a href="#" onclick='opcionesDatosTramite("alta_tipo_documento")'>Crear tipo de documento</a></li>
					<li><a href="#" onclick='opcionesDatosTramite("alta_tipo_de_obra")'>Crear tipo de obra</a></li>
					<li><a href="#" onclick='opcionesDatosTramite("alta_tipo_de_pago")'>Crear tipo de pago</a></li>
				</ul>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree" onclick='mostrarSubmenu("tareasVisado"),opcionesVisado("nada")'>Generar planilla visado <span class="caret"></span></a></li>
				<ul class="sidebar sidebar-2" style="display:none;" id="tareasPlanillaVisado">
					<li><a href="#" onclick='opcionesVisado("alta_fila_visado")'>Alta fila visado</a></li>
					<li><a href="#" onclick='opcionesVisado("alta_columna_visado")'>Alta columna visado</a></li>
					<li><a href="#" onclick='opcionesVisado("alta_elemnto_visado")'>Alta elemnto visado</a></li>

				</ul>
			<!--<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree" onclick='mostrarSubmenu("sin_submenu")'>Otorgar final de obra</a></li>-->
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix" onclick='mostrarSubmenu("sin_submenu")'>Modificar mis datos personales</a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour" onclick='mostrarSubmenu("consultasInformes")'>Consultas e Informes <span class="caret"></span></a></li>
				<ul class="sidebar sidebar-2" style="display:none;" id="consultasInformes">
					<li><a href="vista_de_tramites">Tramites en curso</a></li>
					<li><a href="vista_de_usuarios">Usuarios por grupo</a></li>
					<li><a href="#">Consulta 3</a></li>
				</ul>
		</font>
	</ul>
{% endblock %}

{% block contenido %}
	<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" >

	  <div class="panel">
		<div class="panel-heading box" role="tab" id="headingFive">
		  <h5 class="panel-title">
			<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" onclick='mostrarSubmenu("tareasUsuario")'>
			  <font color="#ffffff" size="2">Usuarios</font>
			</a>
		  </h5>
		</div>
		<div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
		  <div class="panel-body">
			<div class="container-fluid">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
							<select class="form-control input-sm" id="opcionesDelUsuario" name="Opciones de usuario" onChange="opcionesUsuario(this.value);">
								<option selected value="nada"> ¿Que desea hacer? </option>
								<option value="alta_usuario">Crear Usuario</option>
								<option value="modificar_usuario_grupo">Cambiar usuario de grupo</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			  <div class="container-fluid" id="alta_usuario" style="display: none;">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<hr>
						<div style="display:none">
							{% block alta_administrativo %}
								{% crispy usuario_persona_form %}
							{% endblock %}
						</div>
						<form method="post" enctype="multipart/form-data"> {% csrf_token %}
							<div id="persona_administrativo" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
							</div>
							<div id="profesional_administrativo" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
							</div>
							<div id="usuario_administrativo" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
							</div>
							<div id="boton_administrativo" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
								<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
									Limpiar
								</button>
							</div>
							<br>
						</form>
					</div>
				</div>
			  </div>

			<div class="container-fluid" id="modificar_usuario_grupo" style="display: none;">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<hr>
						<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
							<form action="" method="">
								<select class="form-control input-sm" id="" name="" onChange="" title="Selecciona nombre del grupo que vas a modificar" >
									<option selected value=""> ¿Que usuario desea cambiar? </option>
									<option value="">Usuario 1</option>
									<option value="">Usuario 2</option>
									<option value="">Usuario 3</option>
								 </select>
							</form>
						</div>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<hr>
						{% block cambiar_usuario_grupo %}
							{% include "persona/director/cambiar_usuario_de_grupo.html" %}
						{% endblock %}
					</div>
				</div>
			</div>
		  </div>
		</div>
	  </div>
	  <div class="panel">
		<div class="panel-heading box" role="tab" id="headingTwo">
		  <h5 class="panel-title">
			<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" onclick='mostrarSubmenu("tareasTramite")'>
			  <font color="#ffffff" size="2">Datos Trámite</font>
			</a>
		  </h5>
		</div>
		<div id="collapseTwo" class="panel-collapse
			{% if submit_name != 'tipo_documento_submit' and submit_name != 'tipo_obra_submit' %}collapse{% endif %}
			" role="tabpanel" aria-labelledby="headingTwo">
			<div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
								<select class="form-control input-sm" id="opcionesDelTramite" name="Opciones de Datos del tramite" onChange="opcionesDatosTramite(this.value);">
									<option selected value="nada"> ¿Que desea hacer? </option>
									<option value="alta_tipo_documento">Crear tipo de documento</option>
									<option value="alta_tipo_de_obra">Crear tipo de obra</option>
									<option value="alta_tipo_de_pago">Crear tipo de pago</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="container-fluid" id="alta_tipo_documento" {% if submit_name != 'tipo_documento_submit' %}class="hide"{% endif %} style="display: none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<hr>
							<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="display:none">
								{% block alta_tipo_documento %}
									{% crispy tipo_documento_form %}
								{% endblock %}
							</div>
							<form method="post" enctype="multipart/form-data"> {% csrf_token %}
								<div id="tipo" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="requerido_para" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="boton_tipo" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
									<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
										Limpiar
									</button>
								</div>
								<br>
							</form>
						</div>
					</div>
				</div>
				<div class="container-fluid" id="alta_tipo_de_obra" style="display: none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<hr>
							<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="display:none">
								{% block alta_tipo_de_obra %}
									{% crispy tipo_obra_form %}
								{% endblock %}
							</div>
							<form method="post" enctype="multipart/form-data"> {% csrf_token %}
								<div id="nombre_tipo_obra" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="desc_tipo_obra" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="categoria_tipo_obra" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="boton_tipo_obra" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
									<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
										Limpiar
									</button>
								</div>
								<br>
							</form>
						</div>
					</div>
				</div>
				<div class="container-fluid" id="alta_tipo_de_pago" {% if submit_name != 'tipo_de_pago_submit' %}class="hide"{% endif %} style="display: none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<hr>
							<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="display:none" >
								{% block alta_tipo_de_pago %}
									{% crispy tipo_pago_form %}
								{% endblock %}
							</div>
							<form method="post" enctype="multipart/form-data"> {% csrf_token %}
									<div id="nombre_tipo_pago" class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								</div>
								<div id="boton_tipo_pago" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
									<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
										Limpiar
									</button>
								</div>
								<br>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	  </div>

		<!-- ACA VA LO NUEVO //LO DE PLANILLA VISADO-->
		
			<div class="panel">
				<div class="panel-heading box" role="tab" id="headingThree">
					<h5 class="panel-title">
						<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="collapseThree" aria-expanded="false" aria-controls="colapseThree" onclick='mostrarSubmenu("sin_submenu")'>
							<font color="#fffff" size="2">Planilla de visado</font>
						</a>			
					</h5>
				</div>
				<div id="collapseThree" class="panel-collapse" role="tabpanel" aria-labelledby="headingThree">
					<div class="panel-body">
						<div class="panel-body">
							<div class="row">
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
										<select class="form-control input-sm" id="opcionVisado" name="Obciones para planilla visado" onchange="opcionesVisado(this.value)">
											<option selected value="nada">¿Que desea hacer?</option>
											<option value="alta_fila">Crear fila visado</option>
											<option value="alta_columna">Crear columna visado</option>
											<option value="alta_item">Generar planilla visado</option>
										</select>
									</div>
								</div>
							</div>
						</div>	
					</div>
				</div>
				<div class="container-fluid" id="alta_fila" {% if submit_name != 'fila_visado_submit' %} class="hide"{% endif %} style="display:none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block alta_fila %}
								{% crispy fila_visado_form %}
							{% endblock %}
						</div>
					</div>
				</div>
				<div class="container-fluid" id="alta_columna" {% if submit_name != 'columna_visado_submit' %} class="hide"{% endif %} style="display:none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block alta_columna %}
								{% crispy columna_visado_form %}
							{% endblock %}
						</div>
					</div>
				</div>
				<div class="container-fluid" id="alta_item" {% if submit_name != 'item_visado_submit' %} class="hide"{% endif %} style="display:none;">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block alta_item %}
								{% crispy planilla_de_visado_form %}
							{% endblock %}
						</div>
					</div>
				</div>
			</div>
		
		<!-- FINALIZA LO DE PLANILLA VISADO-->
	  <div class="panel">
		<div class="panel-heading box" role="tab" id="headingSix">
		  <h5 class="panel-title">
			<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix" onclick='mostrarSubmenu("sin_submenu")'>
			  <font color="#ffffff" size="2">Datos personales</font>
			</a>
		  </h5>
		</div>
		<div id="collapseSix" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix">
		  <div class="panel-body">
			<div class="container-fluid">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<div class="container-fluid">
						<br>
							<form action="" class="" >
								<div class="row">
									<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
											<div class="form-group">
												<label>Nro. de teléfono:</label>
												<input class="form-control input-sm" id="" name="" type="text" placeholder="Ingresar Nro de telefono" title="Ingresar nuevo Nro de telefono" maxlength="13" autofocus />
											</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
											<div class="form-group">
												<label for="">E-Mail:</label>
												<input class="form-control input-sm" id="" name="" type="email" placeholder="Ingresar e-mail" title="Ingresar nuevo e-mail" maxlength="20" />
											</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
										<label for="">Cambiar Foto de perfil:</label>
										<br>
										<input class="file" id="perfil" type="file" data-preview-file-type="any" title="Cargar nueva foto de perfil">
									</div>
								</div>
								<div class="container-fluid">
									<br>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
											<button class="btn btn-primary btn-sm" type="submit" title="Enviar modificación de mis datos">
												Modificar mis datos
											</button>
											<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
												Limpiar
											</button>
										</div>
									</div>
								</div>
							</form>
							<br>
						</div>
					</div>
				</div>
			</div>
		  </div>
		</div>
	  </div>
	  <div class="panel" style="display: none;">
		<div class="panel-heading box" role="tab" id="headingFour">
		  <h5 class="panel-title">
			<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
			  <font color="#ffffff" size="2">Consultas e Informes</font>
			</a>
		  </h5>
		</div>
		<div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
		  <div class="panel-body">
		  </div>
		</div>
	  </div>
	</div>

{% endblock %}


{% block scripts %}

	<script type="text/javascript">
	(function(){
		$(".datepicker").datepicker({
				changeDay: true,
				changeMonth: true,
				changeYear: true,
				yearRange: "1990:2030",
				dateFormat: 'dd/mm/yy'
		});
	})();
	</script>

	<script>
		$("#perfil").fileinput({
			showCaption: false,
			browseClass: "btn btn-primary btn-sm",
			fileType: "any",
			maxFileCount: 1,
			browseLabel: 'Cargar nueva foto de perfil',
			showUpload: false,
			showRemove: false
		});
	</script>

	<script type="text/javascript">
		function opcionesGrupo(id) {
			if (id == "nada") {
				$("#alta_grupo").hide();
				$("#baja_grupo").hide();
				$("#modificar_grupo").hide();
				$("#" + "opcionesDelGrupo").val('nada');
			}
			if (id == "alta_grupo") {
				$("#alta_grupo").show();
				$("#baja_grupo").hide();
				$("#modificar_grupo").hide();
				//esto es por si dejo los submenu
				$("#" + "opcionesDelGrupo").val('alta_grupo');
			}
			if (id == "baja_grupo") {
				$("#alta_grupo").hide();
				$("#modificar_grupo").hide();
				$("#baja_grupo").show();
				//esto es por si dejo los submenu
				$("#" + "opcionesDelGrupo").val('baja_grupo');
			}
			if (id == "modificar_grupo") {
				$("#alta_grupo").hide();
				$("#modificar_grupo").show();
				$("#baja_grupo").hide();
				//esto es por si dejo los submenu
				$("#" + "opcionesDelGrupo").val('modificar_grupo');
			}
		}

		function opcionesUsuario(id) {
			if (id == "nada") {
				$("#alta_usuario").hide();
				$("#modificar_usuario_grupo").hide();
				$("#" + "opcionesDelUsuario").val('nada');
			}
			if (id == "alta_usuario"){
				$("#alta_usuario").show();
				$("#modificar_usuario_grupo").hide();
				$("#" + "opcionesDelUsuario").val('alta_usuario');
			}
			if (id == "modificar_usuario_grupo") {
				$("#alta_usuario").hide();
				$("#modificar_usuario_grupo").show();
				//esto es por si dejo los submenu
				$("#" + "opcionesDelUsuario").val('modificar_usuario_grupo');
			}

		}

		function opcionesDatosTramite(id) {
				if (id == "nada") {
					$("#alta_tipo_documento").hide();
					$("#alta_tipo_de_obra").hide();
					$("#alta_tipo_de_pago").hide();
					$("#" + "opcionesDelTramite").val('nada');
				}
				if (id == "alta_tipo_documento") {
					$("#alta_tipo_documento").show();
					$("#alta_tipo_de_obra").hide();
					$("#alta_tipo_de_pago").hide();
					//esto es por si dejo los submenu
					$("#" + "opcionesDelTramite").val('alta_tipo_documento');
				}
				if (id == "alta_tipo_de_obra") {
					$("#alta_tipo_documento").hide();
					$("#alta_tipo_de_obra").show();
					$("#alta_tipo_de_pago").hide();
					//esto es por si dejo los submenu
					$("#" + "opcionesDelTramite").val('alta_tipo_de_obra');
				}
				if (id == "alta_tipo_de_pago") {
					$("#alta_tipo_documento").hide();
					$("#alta_tipo_de_obra").hide();
					$("#alta_tipo_de_pago").show();
					//esto es por si dejo los submenu
					$("#" + "opcionesDelTramite").val('alta_tipo_de_pago');
				}
		}

		function opcionesVisado(id){
			if (id == "nada"){
				$("#alta_fila").hide();
				$("#"+"opcionesVisado").val('nada');
			}			
			if (id == "alta_fila"){
				$("#alta_fila").show();
				$("#"+"opcionesVisado").val('alta_fila');
			}
			if (id == "alta_columna"){
				$("#alta_columna").show();
				$("#"+"opcionesVisado").val('alta_columna');
			}
			if (id == "alta_item"){
				$("#alta_item").show();
				$("#"+"opcionesVisado").val('alta_item');
			}
		}

	</script>

	<script type="text/javascript">
		function mostrarSubmenu(subformulario)
		{
			if(subformulario=="sin_submenu"){
				$('.' + "sidebar-2").hide();
			}
			else{
				var idSubformulario=document.getElementById(subformulario).id;
				if($('#' + idSubformulario).is(':hidden')){
					$('.' + "sidebar-2").hide();
					$('#' + idSubformulario).show();
				}else{
					$('#' + idSubformulario).hide();
				}
			}
		}
	</script>

	<script>

		$('#div_id_dni').appendTo('#persona_administrativo');
		$('#div_id_nombre').appendTo('#persona_administrativo');
		$('#div_id_apellido').appendTo('#persona_administrativo');
		$('#div_id_telefono').appendTo('#persona_administrativo');
		$('#div_id_domicilio').appendTo('#profesional_administrativo');
		$('#div_id_cuil').appendTo('#profesional_administrativo');
		$('#div_id_mail').appendTo('#profesional_administrativo');
		$('#div_id_matricula').appendTo('#profesional_administrativo');
		$('#div_id_usuario').appendTo('#usuario_administrativo');
		$('#div_id_password').appendTo('#usuario_administrativo');
		$('#div_id_grupo').appendTo('#usuario_administrativo')
		$('#submit-id-usuario_persona_submit').appendTo('#boton_administrativo');

		$('#id_password').removeAttr("type");
		$('#id_password').attr("type","password");

		$('.selectmultiple').attr( "size", "6" );
		$('.selectmultiple').append($('<option>',{value:0, text:'Seleccione un grupo'}));
		$('.selectmultiple > option[value="0"]').attr('selected', 'selected');

		var selectList = $('#id_grupo option');
		selectList.sort(function(a,b){
			a = a.value;
			b = b.value;
			return a-b;
		});
		$('#id_grupo').html(selectList);

		$('#alta_tipo_documento #div_id_nombre').appendTo('#tipo')
		$('#alta_tipo_documento #div_id_descripcion').appendTo('#tipo')

		$('#div_id_fecha_alta').appendTo('#tipo')
		$('#div_id_activo').appendTo('#tipo')
		$('#div_id_requerido').appendTo('#requerido_para')
		$('#submit-id-tipo_documento_submit').appendTo('#boton_tipo')

		$('#alta_tipo_de_obra #div_id_nombre').appendTo('#nombre_tipo_obra')
		$('#alta_tipo_de_obra #div_id_descripcion').appendTo('#desc_tipo_obra')
		$('#alta_tipo_de_obra #div_id_categorias').appendTo('#categoria_tipo_obra')
		$('#submit-id-tipo_obra_submit').appendTo('#boton_tipo_obra')

		$('#alta_tipo_de_pago #div_id_nombre').appendTo('#nombre_tipo_pago')
		$('#submit-id-tipo_de_pago_submit').appendTo('#boton_tipo_pago')

		


	</script>

	<script type="text/javascript">
		function cargarpermisosSeleccionados(objeto,selectUsado)
		{
			var indexSelect=document.getElementById(objeto.id).selectedIndex;
			var idUsado=document.getElementById(selectUsado);
			idUsado.options[idUsado.options.length]=new Option(($("#"+objeto.id+" option:selected").text()),indexSelect);
		}
	</script>

{% endblock %}
